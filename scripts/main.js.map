{"version":3,"sources":["main.js"],"names":["main","graph","createGraphFromFile","layout","Viva","Graph","Layout","forceDirected","springLength","springCoeff","dragCoeff","gravity","theta","graphics","View","webglGraphics","renderer","container","document","getElementById","renderLinks","prerender","events","webglInputEvents","click","node","mcxDialog","confirm","id","animationType","width","height","titleStyle","color","background","buttonStyle","border","backgroundColor","title","btn","btnClick","index","window","open","run","mainTwo","createGraphIDFromFile","numbarBlock","nameFile","readFile","console","log","readWithParsing","pathFile","mmdShowToast","txtFile","XMLHttpRequest","onreadystatechange","readyState","status","lines","responseText","split","j","length","elements","debug","addNode","String","addLink","send","pathInput","exstension","numberBlock","undefined"],"mappings":"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","sourcesContent":["function main() {\n  //Grading graph\n  var graph = createGraphFromFile();\n\n  var layout = Viva.Graph.Layout.forceDirected(graph, {\n    springLength : 30,\n    springCoeff : 0.0008,\n    dragCoeff : 0.01,\n    gravity : -1.2,\n    theta : 1\n  });\n\n  var graphics = Viva.Graph.View.webglGraphics();\n\n\n  var renderer = Viva.Graph.View.renderer(graph,\n    {\n      layout     : layout,\n      graphics   : graphics,\n      container: document.getElementById('graph-container'),\n      renderLinks : true,\n      prerender  : true,\n    });\n\n    var events = Viva.Graph.webglInputEvents(graphics, graph);\n\n    events.click(function (node) {\n        mcxDialog.confirm(\"The tx id of the node is: \" + node.id,{\n          animationType: \"zoom\",\n          width: 550,  \n          height: 200, \n          titleStyle: {\n            color: \"#ffbd39\",\n            background: \"#212121\"\n          },\n          buttonStyle: [{\n\t\t\t\t\t\tcolor: \"#ffbd39\",\n\t\t\t\t\t\tborder: \"1px solid #323232\",\n\t\t\t\t\t\tbackgroundColor: \"#323232\"\n\t\t\t\t\t},{\n\t\t\t\t\t\tcolor: \"#FFFFFF\",\n\t\t\t\t\t\tborder: \"1px solid #323232\",\n\t\t\t\t\t\tbackgroundColor: \"#323232\"\n\t\t\t\t\t}\n          ],\n          title: 'Info node',\n          btn: ['Find on Blockstream', 'Close'],\n          btnClick: function(index){  \n            if(index === 0){\n              window.open(\"https://blockstream.info/tx/\" + node.id);\n            }\n          }\n        });\n    });\n\n  renderer.run();\n\n}\n\nfunction mainTwo() {\n\n  //Grading graph\n  var graph = createGraphIDFromFile();\n\n  var layout = Viva.Graph.Layout.forceDirected(graph, {\n    springLength : 30,\n    springCoeff : 0.0008,\n    dragCoeff : 0.01,\n    gravity : -1.2,\n    theta : 1\n  });\n\n  var graphics = Viva.Graph.View.webglGraphics();\n\n\n  var renderer = Viva.Graph.View.renderer(graph,\n    {\n      layout     : layout,\n      graphics   : graphics,\n      container: document.getElementById('graph-container'),\n      renderLinks : true\n    });\n\n  renderer.run();\n\n}\n\nfunction createGraphIDFromFile() {\n  var graph = Viva.Graph.graph();\n\n  var numbarBlock = 0;\n\n  var nameFile = readFile('resources/pubKey/', '-idw.txt', numbarBlock);\n  console.log('Name file: ' + nameFile);\n  readWithParsing(nameFile, graph);\n  return graph;\n}\n\nfunction createGraphFromFile() {\n  var graph = Viva.Graph.graph();\n\n  var numbarBlock = 32;\n\n  var nameFile = readFile('resources/tx/', '_tx.txt', numbarBlock);\n  console.log('Name file: ' + nameFile);\n  readWithParsing(nameFile, graph);\n  return graph;\n}\n\nfunction readWithParsing(pathFile, graph) {\n  mmdShowToast(\"Take a Coffe â˜•\");\n  let txtFile = new XMLHttpRequest();\n  txtFile.open('GET', pathFile, true);\n  txtFile.onreadystatechange = function(){\n    if (txtFile.readyState === 4) {  // document is ready to parse.\n      if (txtFile.status === 200) {  // file is found\n        let lines = txtFile.responseText.split('\\n');\n        for(let j = 0; j < lines.length; j++){\n          let elements = lines[j].split('|-|');\n          console.debug('Element first: ' + elements[0]);\n          graph.addNode(String(elements[0]));\n          graph.addNode(String(elements[elements.length]));\n          console.debug('Element last: ' + elements[elements.length - 1]);\n          graph.addLink(String(elements[0]), String(elements[elements.length - 1]))\n          //Only for demo Github\n           if(j === 5000){\n            mmdShowToast('Loaded 500 transactions');\n            mmdShowToast('Clik on node for explore it');            \n            return;\n          }\n        }\n        mmdShowToast('Loaded ' + txtFile.responseText.split('\\n').length + \" transactions\");\n        console.debug('Line read is: ' + lines);\n        console.debug('End file');\n      }\n    }\n  };\n  txtFile.send(null);\n  \n}\n\nfunction readFile(pathInput, exstension, numberBlock) {\n  if(numberBlock < 10){\n    return pathInput + 'blk0000' + String(numberBlock) + exstension;\n  }else if(numberBlock < 100){\n    return pathInput + 'blk000' + String(numberBlock) + exstension;\n  }else if (numberBlock < 1000){\n    return pathInput + 'blk00' + String(numberBlock) + exstension;\n  }else if (numberBlock < 10000){\n    return pathInput + 'blk0' + String(numberBlock) + exstension;\n  }else if (numberBlock < 100000) {\n    return pathInput + 'blk0' + String(numberBlock) + exstension;\n  }\n  return undefined;\n}\n"],"file":"main.js"}